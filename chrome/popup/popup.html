<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FMR.fyi Settings</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <div class="popup-header">
      <h1>FMR.fyi Settings</h1>
    </div>
    
    <div class="popup-content">
      <form id="settings-form">
        <!-- Financial Parameters -->
        <div class="section">
          <h2>Financial Parameters</h2>
          
          <div class="form-group">
            <label for="down-payment-percent">Down Payment (%)</label>
            <input type="number" id="down-payment-percent" min="0" max="100" step="0.1" />
          </div>
          
          <div class="form-group">
            <label for="insurance-monthly">Insurance (Monthly $)</label>
            <input type="number" id="insurance-monthly" min="0" step="1" />
          </div>
          
          <div class="form-group">
            <label for="hoa-monthly">HOA (Monthly $)</label>
            <input type="number" id="hoa-monthly" min="0" step="1" />
          </div>
        </div>
        
        <!-- Property Management -->
        <div class="section">
          <h2>Property Management</h2>
          
          <div class="form-group">
            <label for="pm-mode">Mode</label>
            <select id="pm-mode">
              <option value="percent">Percent</option>
              <option value="amount">Amount</option>
            </select>
          </div>
          
          <div class="form-group" id="pm-percent-group">
            <label for="pm-percent">Percentage (%)</label>
            <input type="number" id="pm-percent" min="0" max="100" step="0.1" />
          </div>
          
          <div class="form-group" id="pm-amount-group" style="display: none;">
            <label for="pm-amount">Amount (Monthly $)</label>
            <input type="number" id="pm-amount" min="0" step="1" />
          </div>
        </div>

        <!-- Custom Line Items -->
        <div class="section">
          <h2>Custom Expenses</h2>
          <p class="section-description">Add additional monthly expenses to your cash flow calculation</p>

          <div id="custom-items-list" class="custom-items-list"></div>

          <button type="button" id="add-custom-item-btn" class="btn-secondary" style="width: 100%; margin-top: 12px;">
            + Add Custom Expense
          </button>
        </div>

        <!-- Rate Overrides -->
        <div class="section">
          <h2>Rate Overrides</h2>
          
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="override-tax-rate" />
              Override Tax Rate
            </label>
          </div>
          
          <div class="form-group" id="tax-rate-group" style="display: none;">
            <label for="tax-rate">Property Tax Rate (%)</label>
            <input type="number" id="tax-rate" min="0" step="0.01" />
          </div>
          
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="override-mortgage-rate" />
              Override Mortgage Rate
            </label>
          </div>
          
          <div class="form-group" id="mortgage-rate-group" style="display: none;">
            <label for="mortgage-rate">Mortgage Rate (%)</label>
            <input type="number" id="mortgage-rate" min="0" step="0.01" />
          </div>
        </div>
        
        <!-- Display Preferences -->
        <div class="section">
          <h2>Display Preferences</h2>
          
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="show-badge-all-pages" />
              Show Badge on All Pages
            </label>
          </div>
          
          <div class="form-group">
            <label for="badge-position">Badge Position</label>
            <select id="badge-position">
              <option value="near-address">Near Address</option>
              <option value="top-right">Top Right</option>
              <option value="bottom-right">Bottom Right</option>
            </select>
          </div>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-primary">Save Settings</button>
          <button type="button" id="reset-btn" class="btn-secondary">Reset to Defaults</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Custom Item Modal -->
  <div id="custom-item-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title">Add Custom Expense</h3>
        <button type="button" class="modal-close" id="modal-close-btn">&times;</button>
      </div>
      <form id="custom-item-form">
        <div class="form-group">
          <label for="custom-item-label">Label</label>
          <input type="text" id="custom-item-label" required placeholder="e.g., Capital Expenditure Reserve" />
        </div>

        <div class="form-group">
          <label for="custom-item-method">Method</label>
          <select id="custom-item-method" required>
            <option value="amount">Fixed Amount ($)</option>
            <option value="percent">Percentage (%)</option>
          </select>
        </div>

        <div class="form-group" id="custom-item-percent-of-group" style="display: none;">
          <label for="custom-item-percent-of">Percentage Of</label>
          <select id="custom-item-percent-of">
            <option value="purchasePrice">Purchase Price</option>
            <option value="rent">Monthly Rent</option>
            <option value="downPayment">Down Payment</option>
          </select>
        </div>

        <div class="form-group">
          <label for="custom-item-value" id="custom-item-value-label">Amount ($)</label>
          <input type="number" id="custom-item-value" min="0" step="0.01" required />
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-primary">Save</button>
          <button type="button" class="btn-secondary" id="modal-cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
